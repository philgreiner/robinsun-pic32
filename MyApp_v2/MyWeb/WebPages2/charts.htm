~inc:header.inc~
<div id="content">

<title>Live data from Robinsun!</title>

<h1>Data from Robinsun:</h1>
	<div id="leftB">
		<img src="../images/button0.png" id="buttonL">
		<p> Left switch: <span id="buttonleft" style="font-weight:normal">-</span> </p>
	</div>
	<div id="rightB">
		<img src="../images/button1.png" id="buttonR">
		<p> Right switch: <span id="buttonright" style="font-weight:normal">-</span> </p>
	</div>
<div id="charts">
<div id="left">
	<p> Left wheel speed: <span id="l_wheel_speed" style="font-weight:normal">-</span> [rad/s] - Reference Value: <span id="omegaref_L" style="font-weight:normal">-</span> [rad/s]</p>
	<p> Left odometer: <span id="odo_l_speed" style="font-weight:normal">-</span> [rad/s] </p>
	<canvas id="leftwheel" width="600" height="200"></canvas>
</div>
<div id="right">
	<p> Right wheel speed: <span id="r_wheel_speed" style="font-weight:normal">-</span> [rad/s] - Reference Value: <span id="omegaref_R" style="font-weight:normal">-</span> [rad/s]</p>
	<p> Right odometer: <span id="odo_r_speed" style="font-weight:normal">-</span> [rad/s] </p>
	<canvas id="rightwheel" width="600" height="200"></canvas>
</div>
</div>

<div>
	<p> Sonars </p>
	<p> 1) <span id="sonar1" style="font-weight:normal">-</span> [cm]; 2) <span id="sonar2" style="font-weight:normal">-</span> [cm]; 3) <span id="sonar3" style="font-weight:normal">-</span> [cm] </p>
	<p> 4) <span id="sonar4" style="font-weight:normal">-</span> [cm]; 5) <span id="sonar5" style="font-weight:normal">-</span> [cm]; 6) <span id="sonar6" style="font-weight:normal">-</span> [cm] </p>
	<p> Blocks: <span id="speed_blocks" style="font-weight:normal">-</span> [rad/s] - Command: <span id="command_blocks" style="font-weight:normal">-</span> [rad/s] </p>
	<p> Fish horizontal: <span id="speed_fish_horizontal" style="font-weight:normal">-</span> [rad/s] - Command: <span id="command_fish_horizontal" style="font-weight:normal">-</span> [/100] </p>
	<p> Fish vertical: <span id="speed_fish_vertical" style="font-weight:normal">-</span> [rad/s] - Command: <span id="command_fish_vertical" style="font-weight:normal">-</span> [/100] </p>
</div>

</div>

<script type="text/javascript">
<!--
var rightwheelspeed = new TimeSeries();
var leftwheelspeed = new TimeSeries();
var omegaref_R = new TimeSeries();
var omegaref_L = new TimeSeries();

setInterval(function() {
        rightwheelspeed.append(new Date().getTime(), document.getElementById('r_wheel_speed').innerHTML);
        leftwheelspeed.append(new Date().getTime(), document.getElementById('l_wheel_speed').innerHTML);
		omegaref_R.append(new Date().getTime(), document.getElementById('omegaref_R').innerHTML);
        omegaref_L.append(new Date().getTime(), document.getElementById('omegaref_L').innerHTML);
      }, 250);
	  
	// Light blue: 153, 204, 204
	// Robinsun: 79, 124, 164
	var rightwheel = new SmoothieChart();
	rightwheel.addTimeSeries(rightwheelspeed, { strokeStyle: 'rgb(79, 124, 164)', fillStyle: 'rgba(79, 124, 164, 0.4)', lineWidth: 3 });
	rightwheel.addTimeSeries(omegaref_R, { strokeStyle: 'rgb(153, 204, 204)', fillStyle: 'rgba(153, 204, 204, 0.4)', lineWidth: 3 });
	rightwheel.streamTo(document.getElementById("rightwheel"), 250);

	var leftwheel = new SmoothieChart();
	leftwheel.addTimeSeries(leftwheelspeed, { strokeStyle: 'rgb(79, 124, 164)', fillStyle: 'rgba(79, 124, 164, 0.4)', lineWidth: 3 });
	leftwheel.addTimeSeries(omegaref_L, { strokeStyle: 'rgb(153, 204, 204)', fillStyle: 'rgba(153, 204, 204, 0.4)', lineWidth: 3 });
	leftwheel.streamTo(document.getElementById("leftwheel"), 250);
//-->
</script>

<script type="text/javascript">
<!--
// Parses the xmlResponse from status.xml and updates the status box
function updateStatus(xmlData) {
	// Update r_wheel_speed value
	document.getElementById('r_wheel_speed').innerHTML = getXMLValue(xmlData, 'r_wheel_speed');
    // Update l_wheel_speed value
	document.getElementById('l_wheel_speed').innerHTML = getXMLValue(xmlData, 'l_wheel_speed');
	// Update omegaref_R value
	document.getElementById('omegaref_R').innerHTML = getXMLValue(xmlData, 'omegaref_R');
    // Update omegaref_L value
	document.getElementById('omegaref_L').innerHTML = getXMLValue(xmlData, 'omegaref_L');
	// Update odometer_R value
	document.getElementById('odo_r_speed').innerHTML = getXMLValue(xmlData, 'odo_r_speed');
    // Update odometer_L value
	document.getElementById('odo_l_speed').innerHTML = getXMLValue(xmlData, 'odo_l_speed');
	// Update sonar values
	document.getElementById('sonar1').innerHTML = getXMLValue(xmlData, 'sonar1');
	document.getElementById('sonar2').innerHTML = getXMLValue(xmlData, 'sonar2');
	document.getElementById('sonar3').innerHTML = getXMLValue(xmlData, 'sonar3');
	document.getElementById('sonar4').innerHTML = getXMLValue(xmlData, 'sonar4');
	document.getElementById('sonar5').innerHTML = getXMLValue(xmlData, 'sonar5');
	document.getElementById('sonar6').innerHTML = getXMLValue(xmlData, 'sonar6');
	
	// Block speeds
	document.getElementById('speed_blocks').innerHTML = getXMLValue(xmlData, 'speed_blocks');
	document.getElementById('command_blocks').innerHTML = getXMLValue(xmlData, 'command_blocks');
	
	// Fish
	document.getElementById('speed_fish_horizontal').innerHTML = getXMLValue(xmlData, 'speed_fish_horizontal');
	document.getElementById('speed_fish_vertical').innerHTML = getXMLValue(xmlData, 'speed_fish_vertical');
	document.getElementById('command_fish_horizontal').innerHTML = getXMLValue(xmlData, 'command_fish_horizontal');
	document.getElementById('command_fish_vertical').innerHTML = getXMLValue(xmlData, 'command_fish_vertical');
}
setTimeout("newAJAXCommand('status.xml', updateStatus, true)",250);
//-->
</script>


<script type="text/javascript">
<!-- 
// Updates the switch values and images displayed accordingly
var buttonL = 0;
var buttonR = 0;
function updateSwitches(xmlData){
		buttonL = getXMLValue(xmlData, 'buttonL');
		if(parseInt(buttonL) == 0)
			document.getElementById('buttonL').src = "../images/button0.png";
		else document.getElementById('buttonL').src = "../images/button1.png";
		
		document.getElementById('buttonleft').innerHTML = buttonL;//getXMLValue(xmlData, 'buttonL');
	
		buttonR = getXMLValue(xmlData, 'buttonR');
		if(parseInt(buttonR) == 0)
			document.getElementById('buttonR').src = "../images/button0.png";
		else document.getElementById('buttonR').src = "../images/button1.png";
		
		document.getElementById('buttonright').innerHTML = buttonR;//getXMLValue(xmlData, 'buttonR');
}
setTimeout("newAJAXCommand('status.xml', updateSwitches, true)",250);
</script>
~inc:footer.inc~